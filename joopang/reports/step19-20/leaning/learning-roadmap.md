# 📚 장애 대응 & 성능 테스트 학습 로드맵

## 🎯 학습 목표

- 애플리케이션에서 발생하는 장애를 대응하고 개선하는 방법 학습
- 모니터링/로깅을 통한 장애 탐지 및 개선 환경 구축
- Error Tolerant한 애플리케이션 개발 관점 이해

---

## ⏱️ 10시간 학습 로드맵

### 🧭 Phase 1. 장애는 왜 대응해야 하는가?

**목표**: 장애 대응의 중요성과 현실적인 관점 이해

**키워드**: 장애 예방, 탐지, 복구, 회고, 조직 문화

**학습 내용**:

- [ ] "Why 장애대응?" 문단 정독
- [ ] 실제 장애 사례와 기업 사례 탐색 및 정리
- [ ] 심리적 안정감이 장애 대응에 중요한 이유 이해

**퀴즈**:

- 장애와 오류의 차이는?
- 장애 발생 시 가장 먼저 해야 할 것은?

---

### 🧭 Phase 2. 모니터링과 로깅의 체계 정립

**목표**: 장애 탐지 체계를 구축하는 요소를 학습하고 적용

**키워드**: Datadog, OpenSearch, Slack Alert, Grafana, Health Check

**학습 내용**:

- [ ] 현재 모니터링 도구 정리
- [ ] Slack 알람 구조 및 설정 방식 탐색
- [ ] OpenSearch와 Datadog 차이점 및 도입 고려사항 정리

**실습**:

- [ ] 간단한 API 서버에 Health Check 및 로깅 기능 붙이기

**자가진단**:

- 시스템에서 가장 먼저 모니터링해야 할 지표는?

---

### 🧭 Phase 3. 부하 테스트 설계 및 수행

**목표**: 성능 병목을 탐색하고 사전 대응할 수 있는 부하 테스트 설계

**키워드**: Load/Stress/Peak/Endurance Test, TPS, Response Time, Deadlock

**학습 내용**:

- [ ] 각 테스트의 개념 및 목적 정리
- [ ] 서비스 내 API별 TPS 설정 및 병목 포인트 예측
- [ ] `k6`, `JMeter`, `nGrinder`, `Artillery` 중 하나 선택해 테스트 스크립트 작성

**퀴즈**:

- Stress Test와 Load Test의 차이?
- TPS가 높으면 무조건 좋은가?

---

### 🧭 Phase 4. 장애 시나리오 대응 훈련

**목표**: 장애 발생 시 즉각적인 대응 프로세스를 이해하고 문서화

**키워드**: 장애 분류, 전파, 복구, 회고, Unhandled Exception, OOM

**학습 내용**:

- [ ] 장애 대응 프로세스를 도식화
- [ ] 장애 시 발생 가능한 상황별 응답 전략 문서화
- [ ] 회고 문서 양식 샘플 정리

**실습**:

- [ ] 테스트 중 실제 장애를 가정해 회고 문서 작성
- [ ] 장애 책임자의 역할을 분담하고 실습하기

**자가진단**:

- 최근 팀 장애 중 가장 개선 효과가 컸던 사례는?

---

### 🧭 Phase 5. 심리적 안정감과 조직 문화

**목표**: 장애 대응을 실질적으로 성공시키는 조직 문화 고민

**키워드**: 책임 회피 방지, 팀 신뢰, 도전 장려

**학습 내용**:

- [ ] `Why 장애대응?` 읽고 마인드맵 그리기
- [ ] 조직 내 장애에 대한 심리적 장벽 존재 여부 인터뷰 진행
- [ ] 장애 발생 시 책임보다 개선을 중심으로 한 회고 방법 고민
- [ ] 우아한형제들, 카카오 등 조직 문화 사례 분석

---

## ⏱️ 3시간 압축 학습 가이드

### Session 1: 장애 대응의 본질과 모니터링 체계 (1시간)

**목표**: 장애란 무엇이고, 왜 발생하며, 어떤 방식으로 탐지 및 대응해야 하는가 이해

**키워드**: 장애 정의, 장애 발생 유형, MTTD/MTTR, 모니터링, 로깅, SPOF, Datadog, OpenSearch, Slack Alert

**학습 액션**:

- [ ] 아래 중 2개 툴 살펴보기: Datadog, OpenSearch, Grafana
- [ ] 모니터링 지표 체크리스트 만들기 (서버 리소스, Latency, Disk, API 응답 오류율, 에러 빈도)

---

### Session 2: 부하 테스트 실습 및 병목 탐색 (1시간)

**목표**: 실제 부하 테스트 도구를 사용해 장애 가능성을 사전에 탐색

**키워드**: Load Test, Stress Test, TPS, Response Time, Deadlock, Slow Query, k6

**실습 액션**:

1. [ ] 테스트 대상 API 선정 (ex. 포인트 결제, 주문 API)
2. [ ] k6 설치 후 샘플 스크립트 작성
3. [ ] TPS 50, 100, 300 목표로 스크립트 수정 및 실행
4. [ ] Latency 및 실패율 그래프 분석
5. [ ] 결과 분석 후 개선사항 간단 정리

---

### Session 3: 장애 대응 프로세스 설계 & 문화적 회고 (1시간)

**목표**: 장애가 실제로 발생했을 때 어떤 순서로, 누구와 함께 대응해야 하는지 체계적으로 정리

**키워드**: 장애 탐지 → 전파 → 분류 → 복구 → 회고, 심리적 안정감

**실습 액션**:

- [ ] 시나리오 작성: "서비스 포인트 결제 API가 500 에러를 반복적으로 뱉는 상황"
- [ ] 장애 회고 문서 작성 템플릿 작성
- [ ] 참고 자료 읽기:
  - [우아한 장애 대응](https://techblog.woowahan.com/4886/)
  - [LINE 장애 대응 문화](https://engineering.linecorp.com/ko/blog/line-platform-server-outage-process-and-dev-culture)

---

## 📖 참고 자료

- [JMeter를 이용한 부하 테스트 작성하기](https://creampuffy.tistory.com/209)
- [nGrinder와 Spring으로 부하 테스트 시나리오 작성하기](https://leezzangmin.tistory.com/42)
- [Artillery를 이용한 부하테스트](https://techblog.tabling.co.kr/artillery%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B6%80%ED%95%98-%ED%85%8C%EC%8A%A4%ED%8A%B8-9d1f6bb2c2f5)

---

## 📌 핵심 모니터링 지표

| 분류 | 지표 |
|------|------|
| 서버 요청 | RPS/TPS, API 에러 비율, Latency |
| 시스템 리소스 | 메모리 사용량, CPU 사용량 |
| JVM 리소스 | Heap 메모리, 스레드 상태/개수, Young/Old 영역 메모리, GC Pause |
| DB | QPS, 트랜잭션 시간, 활성/유휴 커넥션 풀 개수 |
| 캐시 | QPS, Cache Hit Rate, 메모리/CPU 사용량 |
