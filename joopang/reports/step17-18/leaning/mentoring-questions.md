# Kafka 시니어 멘토링 질문 리스트

## 🟢 기본 개념 확인 (뻔한 질문)

### Producer & Consumer

1. Producer에서 acks 설정 (0, 1, all)의 차이점과 실무에서 어떤 값을 주로 사용하시나요?
2. Consumer의 auto.offset.reset을 earliest vs latest 중 어떤 걸 기본값으로 쓰시나요?
3. Consumer Group ID 네이밍 컨벤션이 있으신가요? (서비스명-기능명 등)
4. 메시지 직렬화는 JSON vs Avro vs Protobuf 중 어떤 걸 선호하시나요?

### 파티션 & 토픽

5. 토픽 생성 시 파티션 수는 보통 어떻게 정하시나요? 기준이 있나요?
6. 파티션 수를 나중에 늘리면 키 해싱이 꼬이는데, 실무에서 어떻게 대응하시나요?
7. 토픽 네이밍 컨벤션은 어떻게 하시나요? (domain.event.version 등)

---

## 🟡 실무 운영 관련 질문

### 장애 대응

8. Consumer 리밸런싱 중 메시지 처리 중단 이슈, 실무에서 얼마나 체감되나요?
9. Consumer가 계속 죽었다 살았다 하면서 리밸런싱 폭풍이 발생한 경험 있으신가요? 어떻게 해결하셨나요?
10. 카프카 브로커 장애 시 복구 프로세스는 어떻게 되나요? 자동 복구인가요?
11. 메시지 유실이 의심될 때 어떻게 추적하시나요? 모니터링 도구는 뭘 쓰시나요?

### 운영 & 모니터링

12. Kafka 운영 시 가장 자주 보는 메트릭은 뭔가요? (Consumer Lag, Throughput 등)
13. Consumer Lag가 갑자기 증가하면 어떻게 대응하시나요?
14. 카프카 클러스터 규모는 어느 정도로 운영하시나요? (브로커 수, 파티션 수)
15. Kafka UI 도구는 뭘 쓰시나요? (Kafka Manager, AKHQ, Conduktor 등)

### 인프라 구성

16. Kafka + Zookeeper vs KRaft 모드, 실무에서 어떤 걸 쓰시나요?
17. Kafka 클러스터를 직접 운영 vs 관리형 서비스(MSK, Confluent) 중 선호하시는 건?
18. API 서버와 Consumer 서버를 분리해서 운영하시나요? 같은 코드베이스인가요?
19. Consumer 인스턴스 수는 어떻게 결정하시나요? 오토스케일링 하시나요?

---

## 🟠 딥한 기술 질문

### 동시성 & 순서 보장

20. 같은 파티션 내에서도 Consumer가 배치로 가져가면 순서가 꼬일 수 있지 않나요?
21. 멱등성 보장을 위한 Deduplication 전략은 어떻게 구현하시나요?
22. Exactly-once semantics 실제로 쓰시나요? 성능 오버헤드는 어느 정도인가요?
23. 트랜잭션 Producer 써보셨나요? 언제 필요한가요?

### Transactional Outbox Pattern

24. Outbox 테이블 폴링 주기는 어떻게 설정하시나요? 실시간성과 DB 부하 트레이드오프는?
25. Outbox 레코드 삭제/보관 정책은 어떻게 하시나요? 영구 보관? 일정 기간 후 삭제?
26. CDC(Change Data Capture) 방식의 Outbox (Debezium 등) 써보셨나요? 폴링 대비 장단점은?
27. Outbox 발행 실패 시 재시도 로직은 어떻게 구현하시나요? 무한 재시도?

### 성능 & 최적화

28. 대용량 메시지 처리 시 배치 사이즈(batch.size, linger.ms) 튜닝 경험 있으신가요?
29. Consumer의 max.poll.records 설정은 보통 어느 정도로 하시나요?
30. 파티션 수 대비 Consumer 수의 황금비율 같은 게 있나요?
31. 메시지 압축(compression) 사용하시나요? snappy vs lz4 vs gzip?

---

## 🔴 허를 찌르는 질문

### 설계 철학

32. **"Kafka가 만능인가요?"** Redis Streams, RabbitMQ 대비 Kafka를 선택하는 명확한 기준이 뭔가요?
33. 이벤트 스키마 버전 관리는 어떻게 하시나요? 하위 호환성 깨지면 어떻게 대응?
34. **Consumer가 너무 느려서 Lag가 쌓이면, 메시지를 버리는 게 맞나요? 아니면 계속 쌓아두나요?**
35. 카프카 도입 후 **오히려 복잡해진 경험** 있으신가요? 롤백한 적은?

### 아키텍처 트레이드오프

36. **모놀리식에서 Kafka 쓰는 게 의미 있나요?** 같은 서비스 내에서 이벤트 발행-소비하면 그냥 메서드 호출이랑 뭐가 다르죠?
37. Kafka로 동기 요청-응답 패턴 구현해본 적 있으신가요? 안티패턴 아닌가요?
38. **이벤트 순서가 정말 중요한 비즈니스에서 파티션을 1개만 쓰면 병목이잖아요.** 실무에서 어떻게 타협하시나요?
39. DB 트랜잭션 + Kafka 발행의 원자성을 Outbox 없이 보장할 수 있는 방법이 있나요?

### 장애 시나리오

40. **Kafka 클러스터가 완전히 죽으면 서비스 어떻게 되나요?** Fallback 전략이 있나요?
41. Consumer가 버그로 무한루프 돌면서 같은 메시지만 계속 읽으면 어떻게 감지하나요?
42. **Poison Pill 메시지** (처리 불가능한 메시지) 대응 전략은? DLQ(Dead Letter Queue) 쓰시나요?
43. Rebalancing 중에 들어온 메시지가 유실될 수 있지 않나요? 어떻게 방지하나요?

### 비즈니스 관점

44. **"Kafka 도입하면 개발 속도 빨라지나요?"** 러닝커브와 운영 복잡도 대비 ROI는?
45. 작은 스타트업에서 Kafka 도입 추천하시나요? 아니면 어느 규모부터?
46. Kafka 없이 이벤트 기반 아키텍처 구현하는 방법은? (Spring Events + DB 스케줄러 등)
47. **"결국 Kafka도 SPOF(Single Point of Failure) 아닌가요?"**

### 실전 경험

48. Kafka 때문에 새벽에 호출당한 경험 공유해주실 수 있나요?
49. Kafka 도입 전후로 시스템 복잡도가 어떻게 변했나요? 팀원들 적응은?
50. **가장 후회하는 Kafka 관련 설계 결정**은 뭔가요?

---

## 💡 추가로 여쭤볼 것들

### 쿠폰 발급 시나리오 특화

- 선착순 쿠폰에서 Kafka 키를 쿠폰ID로 하면 초당 발급량 제한은 어떻게 하나요?
- 쿠폰 재고 체크는 Consumer에서 하나요? DB Lock 필요 없나요?
- 발급 실패 시 사용자한테 어떻게 알려주나요? (비동기라 응답을 못 주잖아요)

### 대기열 시나리오 특화

- 대기열에서 파티션 1개로 순서 보장하면 처리량이 너무 낮지 않나요?
- 대기 순번 조회는 어떻게 구현하나요? Kafka offset으로 계산?
- 콘서트별 파티션 분리하면 새 콘서트 추가할 때마다 파티션 추가해야 하나요?

---

## 📝 멘토링 후 정리할 것

- [ ] 답변 중 인상 깊었던 내용
- [ ] 추가로 찾아볼 키워드
- [ ] 내 프로젝트에 적용할 인사이트
- [ ] 멘토가 추천해준 레퍼런스/아티클
