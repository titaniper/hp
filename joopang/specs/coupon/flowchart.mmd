flowchart TD
    A[이벤트 공지 및 스케줄 설정] --> B[사용자 쿠폰 발급 요청]
    B --> C{이벤트 진행 중?}
    C -->|No| I[이벤트 종료 응답]
    C -->|Yes| D[사용자 인증 및 중복 발급 여부 확인]
    D --> E[선착순 토큰 획득/큐 진입]
    E --> F{쿠폰 템플릿 재고 확보?\n(atomic decrement)}
    F -->|No| J[소진 완료 응답]
    F -->|Yes| G[쿠폰 발급 레코드 생성\ncoupons]
    G --> H[발급 결과 알림\n(푸시/웹소켓)]
    H --> K[이벤트 데이터 기록\n(모니터링/데이터 플랫폼)]
    K --> L[사용자에게 성공 응답 반환]
