flowchart TD
    A[인기 상품 조회 API 호출<br/>period=3days, limit=5] --> B[요청 검증 & 기본 파라미터 보정]
    B --> C{Top5 캐시 존재?}
    C -->|Yes| D[캐시 데이터 반환]
    C -->|No| E[데이터 플랫폼 질의<br/>최근 3일 주문 집계]
    E --> F[상품별 판매량 정렬/Top-N 추출]
    F --> G[집계 결과 캐시 저장<br/>TTL=10분]
    G --> D
    D --> H[응답 포맷 변환 랭킹, 판매량, 매출]
    H --> I[클라이언트 렌더링]

    subgraph 보강 파이프라인
        direction LR
        J[주문/결제 이벤트 스트림] --> K[데이터 플랫폼 적재]
        K --> L[주기적 Top-N 배치/스트리밍 집계]
        L --> G
    end
